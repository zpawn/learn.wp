!function(t){"use strict";function s(){this.classSuffix="pug-fps",this.$body=t(document.body),this.$btnSearch=t(".js-fps-open"),this.$modal=t("."+this.classSuffix+"-modal"),this.$form=this.$modal.find("form"),this.$search=this.$modal.find(".js-fps-search-field"),this.$result=this.$modal.find(".js-fps-search-result"),this.$emptyResult=this.$result.find(".js-fps-search-empty-result").detach(),this._bindEvents()}var e=window.location.protocol+"//"+window.location.host+"/wp-json/pug_fps_api";s.prototype._bindEvents=function(){this.$btnSearch.on("click",this.toggleModal.bind(this)),this.$body.on("keyup",this.escKeyUp.bind(this)),this.$modal.on("keyup",".js-fps-search-field",this._eventSearch.bind(this)),this.$modal.on("focusout",".js-fps-search-field",this._eventSearch.bind(this)),this.$modal.on("click",".js-fps-close-modal",this.toggleModal.bind(this)),this.$form.on("submit",this.disableSubmitForm)},s.prototype.toggleModal=function(){this.$body.toggleClass(this.classSuffix+"-open"),this.$modal.toggleClass("open"),this.$body.hasClass(this.classSuffix+"-open")?this.$search.focus():this.$search.blur()},s.prototype.escKeyUp=function(t){27===t.keyCode&&this.$body.hasClass(this.classSuffix+"-open")&&this.toggleModal()},s.prototype._eventSearch=function(t){this.$search.val().length>2&&this.search()},s.prototype.search=function(){var s=this,i=e+"/products/?"+this.$form.serialize();t.get(i,function(t){s._generateProductItem(t)})},s.prototype._generateProductItem=function(s){var e,i=this;i.$search.css({"margin-top":"2%"}),e=0===s.length?i.$emptyResult:s.reduce(function(t,s){return t+='<li class="col-xs-12 col-md-4 post-'+s.id+' product type-product status-publish has-post-thumbnail instock shipping-taxable purchasable product-type-simple" data-sr=\'wait 0.1s, ease-in 20px\'><a class="woocommerce-LoopProduct-link woocommerce-loop-product__link" href="'+s.href+'"><figure class="ws-product-empty-bg"><img class="attachment-shop_catalog size-shop_catalog wp-post-image" width="256" height="256" src="'+s.image+'" alt="'+s.title+'" sizes="(max-width: 256px) 100vw, 256px"/></figure><h2 class="woocommerce-loop-product__title">'+s.title+'</h2><span class="price">'+s.price+"</span></a></li>"},""),this.$result.html(t(e))},s.prototype.disableSubmitForm=function(t){t.preventDefault()},window.FullPageSearch=s}(jQuery),function(t){"use strict";jQuery(document).ready(function(){window.fullPageSearch=new FullPageSearch})}();